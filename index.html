/* --- CHUNK 1: KANJI STYLES --- */
/* Add this to your styles.css */

#kanji-section {
    padding: 4rem 2rem;
    background-color: #f8f9fa;
}

.kanji-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
    gap: 1.5rem;
    margin-top: 2rem;
}

.kanji-card {
    background: white;
    border-radius: 12px;
    padding: 1.5rem;
    text-align: center;
    box-shadow: 0 4px 6px rgba(0,0,0,0.05);
    cursor: pointer;
    transition: transform 0.2s, box-shadow 0.2s;
    border: 2px solid transparent;
}

.kanji-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 15px rgba(0,0,0,0.1);
    border-color: #ff4757;
}

.kanji-char {
    font-size: 4rem;
    font-weight: bold;
    color: #2d3436;
    margin-bottom: 0.5rem;
    font-family: 'Noto Sans JP', sans-serif;
}

.kanji-meaning {
    font-size: 1.1rem;
    color: #636e72;
    font-weight: 500;
}

/* Modal for Memory Tricks */
.kanji-modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.7);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 1000;
    backdrop-filter: blur(5px);
}

.kanji-modal {
    background: white;
    width: 90%;
    max-width: 600px;
    border-radius: 20px;
    padding: 2rem;
    position: relative;
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
    animation: slideUp 0.3s ease-out;
}

@keyframes slideUp {
    from { transform: translateY(50px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
}

.close-modal {
    position: absolute;
    top: 1rem;
    right: 1.5rem;
    font-size: 2rem;
    cursor: pointer;
    color: #aaa;
}

.memory-trick-box {
    background: #fff3cd;
    border-left: 5px solid #ffc107;
    padding: 1rem;
    margin: 1.5rem 0;
    border-radius: 4px;
    font-style: italic;
    color: #5d4037;
}

.readings-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
    margin-top: 1rem;
    text-align: left;
}

.reading-type {
    font-size: 0.8rem;
    text-transform: uppercase;
    color: #b2bec3;
    margin-bottom: 0.2rem;
    letter-spacing: 1px;
}
<section id="kanji-section">
    <div class="section-header">
        <h2>N5 Kanji Challenge</h2>
        <p>Unlock the power of <span class="highlight">Memory Tricks</span>. Click a card to reveal the story behind the character.</p>
    </div>

    <div class="kanji-controls" style="margin-bottom: 20px; display: flex; gap: 10px;">
        <input type="text" id="kanjiSearch" placeholder="Search meaning (e.g., 'Tree', 'Sun')..." 
               style="padding: 10px; border-radius: 8px; border: 1px solid #ddd; width: 100%; max-width: 300px;">
    </div>

    <div class="kanji-grid" id="kanjiGrid">
        </div>
</section>

<div class="kanji-modal-overlay" id="kanjiModalOverlay">
    <div class="kanji-modal">
        <span class="close-modal" onclick="closeKanjiModal()">&times;</span>
        
        <div style="text-align: center; margin-bottom: 1rem;">
            <div id="modalKanjiChar" style="font-size: 6rem; color: #2d3436;"></div>
            <h3 id="modalKanjiMeaning" style="font-size: 2rem; color: #ff4757; margin: 0;"></h3>
        </div>

        <div class="memory-trick-box">
            <strong>ðŸ§  Memory Trick:</strong>
            <p id="modalMemoryTrick"></p>
        </div>

        <hr style="border: 0; border-top: 1px solid #eee; margin: 1.5rem 0;">

        <div class="readings-grid">
            <div>
                <div class="reading-type">Onyomi (Sound)</div>
                <div id="modalOnyomi" style="font-weight: bold; font-size: 1.2rem;"></div>
            </div>
            <div>
                <div class="reading-type">Kunyomi (Meaning)</div>
                <div id="modalKunyomi" style="font-weight: bold; font-size: 1.2rem;"></div>
            </div>
        </div>
        
        <div style="margin-top: 1.5rem; text-align: left;">
            <div class="reading-type">Common Compounds</div>
            <ul id="modalCompounds" style="list-style: none; padding: 0; margin-top: 0.5rem;">
                </ul>
        </div>
    </div>
</div>
/* --- CHUNK 3: KANJI DATA SET 1 --- */
/* Add to script.js */

const n5KanjiList = [
    {
        char: "æ—¥",
        meaning: "Day / Sun",
        onyomi: "NICHI, JITSU (ãƒ‹ãƒ, ã‚¸ãƒ„)",
        kunyomi: "hi, -bi (ã², -ã³)",
        trick: "It is a picture of the **sun**. The rectangle is the shape, and the line in the middle is the sunspot or the heat radiating.",
        compounds: [
            "æ—¥æœ¬ (Nihon) - Japan",
            "æ—¥æ›œæ—¥ (Nichiyoubi) - Sunday",
            "æ¯Žæ—¥ (Mainichi) - Every day"
        ]
    },
    {
        char: "æœˆ",
        meaning: "Month / Moon",
        onyomi: "GETSU, GATSU (ã‚²ãƒ„, ã‚¬ãƒ„)",
        kunyomi: "tsuki (ã¤ã)",
        trick: "It looks like a **crescent moon** with two clouds floating in front of it.",
        compounds: [
            "æœˆæ›œæ—¥ (Getsuyoubi) - Monday",
            "ä¸€æœˆ (Ichigatsu) - January",
            "ä»Šæœˆ (Kongetsu) - This month"
        ]
    },
    {
        char: "æœ¨",
        meaning: "Tree",
        onyomi: "MOKU, BOKU (ãƒ¢ã‚¯, ãƒœã‚¯)",
        kunyomi: "ki (ã)",
        trick: "It looks exactly like a **tree**. The vertical line is the trunk, the horizontal line is the branches, and the bottom strokes are the roots.",
        compounds: [
            "æœ¨æ›œæ—¥ (Mokuyoubi) - Thursday",
            "æœ¨ (Ki) - Tree",
            "å¤§æœ¨ (Taiboku) - Large tree"
        ]
    },
    {
        char: "å±±",
        meaning: "Mountain",
        onyomi: "SAN (ã‚µãƒ³)",
        kunyomi: "yama (ã‚„ã¾)",
        trick: "A pictogram of a **mountain** with three peaks. The middle peak is the highest.",
        compounds: [
            "å¯Œå£«å±± (Fujisan) - Mt. Fuji",
            "å±± (Yama) - Mountain",
            "ç«å±± (Kazan) - Volcano"
        ]
    },
    {
        char: "å·",
        meaning: "River",
        onyomi: "SEN (ã‚»ãƒ³)",
        kunyomi: "kawa (ã‹ã‚)",
        trick: "Three lines flowing vertically, just like the water of a flowing **river**.",
        compounds: [
            "å· (Kawa) - River",
            "å°å· (Ogawa) - Stream/Brook",
            "å·ä¸Š (Kawakami) - Upstream"
        ]
    },
    {
        char: "ç”°",
        meaning: "Rice Field",
        onyomi: "DEN (ãƒ‡ãƒ³)",
        kunyomi: "ta (ãŸ)",
        trick: "A bird's eye view of a **rice paddy** divided into four sections by irrigation channels.",
        compounds: [
            "æ°´ç”° (Suiden) - Paddy field",
            "ç”°ä¸­ (Tanaka) - (Common Surname)",
            "ç”°ã‚“ã¼ (Tanbo) - Rice field"
        ]
    }
];
// End of Chunk 3
/* --- CHUNK 4: KANJI DATA SET 2 --- */
/* Append to n5KanjiList using array push or just continue the array above */

const n5KanjiListPart2 = [
    {
        char: "äºº",
        meaning: "Person",
        onyomi: "JIN, NIN (ã‚¸ãƒ³, ãƒ‹ãƒ³)",
        kunyomi: "hito (ã²ã¨)",
        trick: "A side view of a **person** walking. The legs are striding forward.",
        compounds: [
            "æ—¥æœ¬äºº (Nihonjin) - Japanese person",
            "ä¸‰äºº (Sannin) - Three people",
            "å¤§äºº (Otona) - Adult"
        ]
    },
    {
        char: "å£",
        meaning: "Mouth",
        onyomi: "KOU, KU (ã‚³ã‚¦, ã‚¯)",
        kunyomi: "kuchi (ãã¡)",
        trick: "A wide open **mouth**. It's just a square opening.",
        compounds: [
            "äººå£ (Jinkou) - Population",
            "å…¥å£ (Iriguchi) - Entrance",
            "å‡ºå£ (Deguchi) - Exit"
        ]
    },
    {
        char: "è»Š",
        meaning: "Car / Vehicle",
        onyomi: "SHA (ã‚·ãƒ£)",
        kunyomi: "kuruma (ãã‚‹ã¾)",
        trick: "A bird's eye view of a cart or **car**. You can see the two wheels (top and bottom lines) and the axle going through the middle.",
        compounds: [
            "é›»è»Š (Densha) - Train",
            "è‡ªå‹•è»Š (Jidousha) - Automobile",
            "è»Š (Kuruma) - Car"
        ]
    },
    {
        char: "é–€",
        meaning: "Gate",
        onyomi: "MON (ãƒ¢ãƒ³)",
        kunyomi: "kado (ã‹ã©)",
        trick: "It looks like a pair of swinging saloon **gates**.",
        compounds: [
            "å°‚é–€ (Senmon) - Major/Specialty",
            "é–€ (Mon) - Gate",
            "åé–€ (Meimon) - Distinguished family"
        ]
    },
    {
        char: "ç«",
        meaning: "Fire",
        onyomi: "KA (ã‚«)",
        kunyomi: "hi, bi (ã², ã³)",
        trick: "A person (äºº) waving their arms in panic because they are on **fire** (points on sides).",
        compounds: [
            "ç«æ›œæ—¥ (Kayoubi) - Tuesday",
            "èŠ±ç« (Hanabi) - Fireworks",
            "ç«äº‹ (Kaji) - Fire (accident)"
        ]
    },
    {
        char: "æ°´",
        meaning: "Water",
        onyomi: "SUI (ã‚¹ã‚¤)",
        kunyomi: "mizu (ã¿ãš)",
        trick: "Water splashing out of a central stream. Imagine a fountain splashing **water** left and right.",
        compounds: [
            "æ°´æ›œæ—¥ (Suiyoubi) - Wednesday",
            "æ°´ (Mizu) - Water",
            "æ°´ç€ (Mizugi) - Swimsuit"
        ]
    }
];

// Combine arrays
const fullKanjiList = [...n5KanjiList, ...n5KanjiListPart2];
/* --- CHUNK 5: JS LOGIC (RENDER) --- */

const kanjiGrid = document.getElementById('kanjiGrid');
const searchInput = document.getElementById('kanjiSearch');

function renderKanji(data) {
    kanjiGrid.innerHTML = ''; // Clear current grid

    data.forEach((k, index) => {
        const card = document.createElement('div');
        card.className = 'kanji-card';
        card.onclick = () => openKanjiModal(k); // We will define this next

        // Card Content
        card.innerHTML = `
            <div class="kanji-char">${k.char}</div>
            <div class="kanji-meaning">${k.meaning}</div>
        `;

        kanjiGrid.appendChild(card);
    });
}

// Initial Render
renderKanji(fullKanjiList);

// Search Functionality
searchInput.addEventListener('input', (e) => {
    const term = e.target.value.toLowerCase();
    
    const filtered = fullKanjiList.filter(k => 
        k.meaning.toLowerCase().includes(term) || 
        k.kunyomi.toLowerCase().includes(term)
    );
    
    renderKanji(filtered);
});
/* --- CHUNK 6: JS LOGIC (MODAL) --- */

const modalOverlay = document.getElementById('kanjiModalOverlay');

function openKanjiModal(kanjiData) {
    // Populate Modal Elements
    document.getElementById('modalKanjiChar').innerText = kanjiData.char;
    document.getElementById('modalKanjiMeaning').innerText = kanjiData.meaning;
    
    // Inject Memory Trick (supports HTML like <b> or <strong>)
    document.getElementById('modalMemoryTrick').innerHTML = kanjiData.trick;
    
    document.getElementById('modalOnyomi').innerText = kanjiData.onyomi;
    document.getElementById('modalKunyomi').innerText = kanjiData.kunyomi;

    // Populate Compounds List
    const compoundsList = document.getElementById('modalCompounds');
    compoundsList.innerHTML = ''; // Clear previous
    kanjiData.compounds.forEach(comp => {
        const li = document.createElement('li');
        li.style.padding = "4px 0";
        li.style.borderBottom = "1px dashed #eee";
        li.innerText = comp;
        compoundsList.appendChild(li);
    });

    // Show Modal
    modalOverlay.style.display = 'flex';
}

function closeKanjiModal() {
    modalOverlay.style.display = 'none';
}

// Close if clicking outside the modal card
modalOverlay.addEventListener('click', (e) => {
    if (e.target === modalOverlay) {
        closeKanjiModal();
    }
});

// Close on Escape key
document.addEventListener('keydown', (e) => {
    if (e.key === "Escape" && modalOverlay.style.display === 'flex') {
        closeKanjiModal();
    }
});
/* --- CHUNK 7: NUMBERS & COUNTING DATA --- */
/* Copy this array and spread it into fullKanjiList */

const kanjiNumbers = [
    {
        char: "ä¸€", meaning: "One",
        onyomi: "ICHI, ITSU (ã‚¤ãƒ, ã‚¤ãƒ„)", kunyomi: "hito (ã²ã¨)",
        trick: "Just **one** finger holding up the number one.",
        compounds: ["ä¸€æ—¥ (Tsuitachi) - 1st of month", "ä¸€ã¤ (Hitotsu) - One thing"]
    },
    {
        char: "äºŒ", meaning: "Two",
        onyomi: "NI (ãƒ‹)", kunyomi: "futa (ãµãŸ)",
        trick: "Two lines represent the number **two**.",
        compounds: ["äºŒæœˆ (Nigatsu) - February", "äºŒäºº (Futari) - Two people"]
    },
    {
        char: "ä¸‰", meaning: "Three",
        onyomi: "SAN (ã‚µãƒ³)", kunyomi: "mit (ã¿ã£)",
        trick: "Three lines for the number **three**.",
        compounds: ["ä¸‰æœˆ (Sangatsu) - March", "ä¸‰æ—¥ (Mikka) - 3rd day"]
    },
    {
        char: "å››", meaning: "Four",
        onyomi: "SHI (ã‚·)", kunyomi: "yon, yo (ã‚ˆã‚“, ã‚ˆ)",
        trick: "It looks like a square window with curtains drawn. The corners make **four**.",
        compounds: ["å››æœˆ (Shigatsu) - April", "å››äºº (Yonin) - Four people"]
    },
    {
        char: "äº”", meaning: "Five",
        onyomi: "GO (ã‚´)", kunyomi: "itsu (ã„ã¤)",
        trick: "Connect the dots of the number 5, and it looks a bit like this Kanji.",
        compounds: ["äº”æœˆ (Gogatsu) - May", "äº”å†† (Goen) - 5 yen"]
    },
    {
        char: "å…­", meaning: "Six",
        onyomi: "ROKU (ãƒ­ã‚¯)", kunyomi: "mut (ã‚€ã£)",
        trick: "A person doing jumping jacks with legs spread. **Six** reps!",
        compounds: ["å…­æœˆ (Rokugatsu) - June", "å…­ã¤ (Muttsu) - Six things"]
    },
    {
        char: "ä¸ƒ", meaning: "Seven",
        onyomi: "SHICHI (ã‚·ãƒ)", kunyomi: "nana (ãªãª)",
        trick: "Imagine the number **7** turned upside down.",
        compounds: ["ä¸ƒæœˆ (Shichigatsu) - July", "ä¸ƒã¤ (Nanatsu) - Seven things"]
    },
    {
        char: "å…«", meaning: "Eight",
        onyomi: "HACHI (ãƒãƒ)", kunyomi: "yat (ã‚„ã£)",
        trick: "The shape of a volcano (Mt Fuji). In Japan, 8 is a lucky number because it widens at the bottom (prosperity).",
        compounds: ["å…«æœˆ (Hachigatsu) - August", "å…«ç™¾å±‹ (Yaoya) - Greengrocer"]
    },
    {
        char: "ä¹", meaning: "Nine",
        onyomi: "KYUU, KU (ã‚­ãƒ¥ã‚¦, ã‚¯)", kunyomi: "kokono (ã“ã“ã®)",
        trick: "It looks like a person doing a pushup, trying to do **nine** of them.",
        compounds: ["ä¹æœˆ (Kugatsu) - September", "ä¹ã¤ (Kokonotsu) - Nine things"]
    },
    {
        char: "å", meaning: "Ten",
        onyomi: "JUU (ã‚¸ãƒ¥ã‚¦)", kunyomi: "tou (ã¨ã†)",
        trick: "A plus sign. Put two fives together (lines) to make **ten**.",
        compounds: ["åæœˆ (Juugatsu) - October", "å (Tou) - Ten things"]
    },
    {
        char: "ç™¾", meaning: "Hundred",
        onyomi: "HYAKU (ãƒ’ãƒ£ã‚¯)", kunyomi: "momo (ã‚‚ã‚‚)",
        trick: "Take 'One' (ä¸€) and rotate 'White' (ç™½) 90 degrees. One white standard represents a **hundred** soldiers.",
        compounds: ["ä¸‰ç™¾ (Sanbyaku) - 300", "ç™¾å†† (Hyakuen) - 100 yen"]
    },
    {
        char: "åƒ", meaning: "Thousand",
        onyomi: "SEN (ã‚»ãƒ³)", kunyomi: "chi (ã¡)",
        trick: "It combines 'One' (ä¸€) and 'Ten' (å) with a slash. 10 times 10 is... well, imagine it's a huge jump to a **thousand**.",
        compounds: ["åƒå†† (Senyen) - 1000 yen", "åƒè‘‰ (Chiba) - Chiba Prefecture"]
    },
    {
        char: "ä¸‡", meaning: "Ten Thousand",
        onyomi: "MAN (ãƒžãƒ³)", kunyomi: "â€”",
        trick: "It looks like a variation of 'Five' (äº”) but simpler. It's a huge number, **10,000**.",
        compounds: ["ä¸€ä¸‡å†† (Ichimanen) - 10,000 yen", "ä¸‡å›½ (Bankoku) - All countries"]
    },
    {
        char: "å††", meaning: "Yen / Circle",
        onyomi: "EN (ã‚¨ãƒ³)", kunyomi: "maru (ã¾ã‚‹)",
        trick: "It looks like a teller window at a bank where you get **Yen**.",
        compounds: ["ç™¾å†† (Hyakuen) - 100 Yen", "å††é«˜ (Endaka) - Strong Yen"]
    }
];
/* --- CHUNK 8: PEOPLE & SCHOOL DATA --- */

const kanjiPeople = [
    {
        char: "çˆ¶", meaning: "Father",
        onyomi: "FU (ãƒ•)", kunyomi: "chichi (ã¡ã¡)",
        trick: "Two axes crossed above a face. The **father** provides/protects.",
        compounds: ["ãŠçˆ¶ã•ã‚“ (Otousan) - Father (polite)", "ç¥–çˆ¶ (Sofu) - Grandfather"]
    },
    {
        char: "æ¯", meaning: "Mother",
        onyomi: "BO (ãƒœ)", kunyomi: "haha (ã¯ã¯)",
        trick: "The outline of a woman with two dots representing breasts. A nursing **mother**.",
        compounds: ["ãŠæ¯ã•ã‚“ (Okaasan) - Mother (polite)", "æ¯å›½ (Bokoku) - Motherland"]
    },
    {
        char: "å‹", meaning: "Friend",
        onyomi: "YUU (ãƒ¦ã‚¦)", kunyomi: "tomo (ã¨ã‚‚)",
        trick: "Two hands holding each other. A symbol of **friendship**.",
        compounds: ["å‹é” (Tomodachi) - Friend", "å‹äºº (Yuujin) - Friend (formal)"]
    },
    {
        char: "å¥³", meaning: "Woman",
        onyomi: "JO (ã‚¸ãƒ§)", kunyomi: "onna (ãŠã‚“ãª)",
        trick: "A picture of a kneeling **woman**.",
        compounds: ["å¥³æ€§ (Josei) - Female", "å¥³ã®å­ (Onnanoko) - Girl"]
    },
    {
        char: "ç”·", meaning: "Man",
        onyomi: "DAN (ãƒ€ãƒ³)", kunyomi: "otoko (ãŠã¨ã“)",
        trick: "Rice Field (ç”°) + Power (åŠ›). The **man** works in the rice field using power.",
        compounds: ["ç”·æ€§ (Dansei) - Male", "ç”·ã®å­ (Otokonoko) - Boy"]
    },
    {
        char: "å­", meaning: "Child",
        onyomi: "SHI (ã‚·)", kunyomi: "ko (ã“)",
        trick: "A baby wrapped in a blanket with arms sticking out. A **child**.",
        compounds: ["å­ä¾› (Kodomo) - Child", "å¥³å­ (Joshi) - Girl/Woman"]
    },
    {
        char: "æœ¬", meaning: "Book / Origin",
        onyomi: "HON (ãƒ›ãƒ³)", kunyomi: "moto (ã‚‚ã¨)",
        trick: "Tree (æœ¨) with a line at the base (roots). The root is the **origin**. Paper comes from trees = **Book**.",
        compounds: ["æœ¬ (Hon) - Book", "æ—¥æœ¬ (Nihon) - Japan (Sun Origin)"]
    },
    {
        char: "å­¦", meaning: "Study / Learning",
        onyomi: "GAKU (ã‚¬ã‚¯)", kunyomi: "mana (ã¾ãª)",
        trick: "A child (å­) under a school roof being taught by hands from above. Time to **study**.",
        compounds: ["å­¦ç”Ÿ (Gakusei) - Student", "å­¦æ ¡ (Gakkou) - School"]
    },
    {
        char: "æ ¡", meaning: "School",
        onyomi: "KOU (ã‚³ã‚¦)", kunyomi: "â€”",
        trick: "Tree (æœ¨) + äº¤ (Mingle/Mix). A place made of wood where people mingle = **School**.",
        compounds: ["å­¦æ ¡ (Gakkou) - School", "é«˜æ ¡ (Koukou) - High School"]
    },
    {
        char: "å…ˆ", meaning: "Previous / Ahead",
        onyomi: "SEN (ã‚»ãƒ³)", kunyomi: "saki (ã•ã)",
        trick: "Human legs running ahead of the earth. Going **ahead**.",
        compounds: ["å…ˆç”Ÿ (Sensei) - Teacher", "å…ˆæœˆ (Sengetsu) - Last month"]
    },
    {
        char: "ç”Ÿ", meaning: "Life / Birth",
        onyomi: "SEI, SHOU (ã‚»ã‚¤, ã‚·ãƒ§ã‚¦)", kunyomi: "i, u, na (ã„, ã†, ãª)",
        trick: "A plant sprouting from the ground. New **life**.",
        compounds: ["å…ˆç”Ÿ (Sensei) - Teacher (born before)", "ç”Ÿãã‚‹ (Ikiru) - To live"]
    }
];
/* --- CHUNK 9: TIME & DIRECTION DATA --- */

const kanjiTimeDir = [
    {
        char: "ä»Š", meaning: "Now",
        onyomi: "KON (ã‚³ãƒ³)", kunyomi: "ima (ã„ã¾)",
        trick: "A roof with a clock hand under it pointing down. The time is **now**.",
        compounds: ["ä»Šæ—¥ (Kyou) - Today", "ä»Šæœˆ (Kongetsu) - This month"]
    },
    {
        char: "æ™‚", meaning: "Time / Hour",
        onyomi: "JI (ã‚¸)", kunyomi: "toki (ã¨ã)",
        trick: "Sun (æ—¥) + Temple (å¯º). Before clocks, monks rang the temple bell at sunrise to mark **time**.",
        compounds: ["æ™‚é–“ (Jikan) - Time", "ä¸€æ™‚ (Ichiji) - One o'clock"]
    },
    {
        char: "åˆ†", meaning: "Minute / Part / Understand",
        onyomi: "FUN, BUN (ãƒ•ãƒ³, ãƒ–ãƒ³)", kunyomi: "wa (ã‚)",
        trick: "Eight (å…«) + Knife (åˆ€). Taking a knife and dividing something into **parts** or minutes.",
        compounds: ["äº”åˆ† (Gofun) - 5 minutes", "åŠåˆ† (Hanbun) - Half"]
    },
    {
        char: "åŠ", meaning: "Half",
        onyomi: "HAN (ãƒãƒ³)", kunyomi: "naka (ãªã‹)",
        trick: "Three lines cut straight down the middle. Splitting it in **half**.",
        compounds: ["äºŒæ™‚åŠ (Nijihan) - 2:30", "åŠå¹´ (Hantoshi) - Half a year"]
    },
    {
        char: "åˆ", meaning: "Noon",
        onyomi: "GO (ã‚´)", kunyomi: "â€”",
        trick: "Looks like the number Ten (å) with a slanted roof. The sun is highest at **noon**.",
        compounds: ["åˆå‰ (Gozen) - AM", "åˆå¾Œ (Gogo) - PM"]
    },
    {
        char: "ä¸Š", meaning: "Up / Above",
        onyomi: "JOU (ã‚¸ãƒ§ã‚¦)", kunyomi: "ue (ã†ãˆ)",
        trick: "A pointer pointing **up** above the ground line.",
        compounds: ["ä¸Š (Ue) - Up", "ä¸Šæ‰‹ (Jouzu) - Skillful (Upper hand)"]
    },
    {
        char: "ä¸‹", meaning: "Down / Below",
        onyomi: "KA, GE (ã‚«, ã‚²)", kunyomi: "shita (ã—ãŸ)",
        trick: "A pointer pointing **down** below the ground line.",
        compounds: ["ä¸‹ (Shita) - Down", "åœ°ä¸‹é‰„ (Chikatetsu) - Subway"]
    },
    {
        char: "ä¸­", meaning: "Middle / Inside",
        onyomi: "CHUU (ãƒãƒ¥ã‚¦)", kunyomi: "naka (ãªã‹)",
        trick: "A line going straight through the **middle** of a box.",
        compounds: ["ç”°ä¸­ (Tanaka) - Middle of field", "ä¸­å›½ (Chuugoku) - China"]
    },
    {
        char: "åŒ—", meaning: "North",
        onyomi: "HOKU (ãƒ›ã‚¯)", kunyomi: "kita (ããŸ)",
        trick: "Two people sitting back to back because it's cold in the **North**.",
        compounds: ["åŒ—æµ·é“ (Hokkaido) - Hokkaido", "åŒ—å£ (Kitaguchi) - North exit"]
    },
    {
        char: "å—", meaning: "South",
        onyomi: "NAN (ãƒŠãƒ³)", kunyomi: "minami (ã¿ãªã¿)",
        trick: "A tropical plant growing inside a border. Warm **South**.",
        compounds: ["å—å£ (Minamiguchi) - South exit", "å— (Minami) - South"]
    },
    {
        char: "æ±", meaning: "East",
        onyomi: "TOU (ãƒˆã‚¦)", kunyomi: "higashi (ã²ãŒã—)",
        trick: "Sun (æ—¥) rising behind a Tree (æœ¨). The sun rises in the **East**.",
        compounds: ["æ±äº¬ (Toukyou) - Tokyo", "æ±å£ (Higashiguchi) - East exit"]
    },
    {
        char: "è¥¿", meaning: "West",
        onyomi: "SEI, SAI (ã‚»ã‚¤, ã‚µã‚¤)", kunyomi: "nishi (ã«ã—)",
        trick: "A bird returning to its nest at sunset. The sun sets in the **West**.",
        compounds: ["é–¢è¥¿ (Kansai) - Kansai region", "è¥¿å£ (Nishiguchi) - West exit"]
    }
];
/* --- CHUNK 10: MERGE & RENDER LOGIC --- */

// Combine ALL data chunks into one Master List
// Make sure this runs AFTER all the consts above are defined
const n5MasterList = [
    ...n5KanjiList,       // From previous turn
    ...n5KanjiListPart2,  // From previous turn
    ...kanjiNumbers,      // Chunk 7
    ...kanjiPeople,       // Chunk 8
    ...kanjiTimeDir       // Chunk 9
];

// Update the initial render to use the Master List
// Replace the old render call with this:
renderKanji(n5MasterList);

// Update Search Logic to search the Master List
const searchInputUpdated = document.getElementById('kanjiSearch');
searchInputUpdated.addEventListener('input', (e) => {
    const term = e.target.value.toLowerCase();
    
    // Search in Meaning, Reading, OR Character
    const filtered = n5MasterList.filter(k => 
        k.meaning.toLowerCase().includes(term) || 
        k.kunyomi.toLowerCase().includes(term) ||
        k.char.includes(term)
    );
    
    renderKanji(filtered);
});
<button onclick="startKanjiQuiz()" style="padding: 10px 20px; background: #ff4757; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: bold;">
    ðŸ”¥ Start Quiz
</button>

<div id="quizOverlay" class="kanji-modal-overlay">
    <div class="kanji-modal" style="text-align: center;">
        <h3 style="color: #ccc;">What is this Kanji?</h3>
        <div id="quizChar" style="font-size: 8rem; margin: 20px 0;"></div>
        
        <div id="quizOptions" style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
            </div>
        <div id="quizResult" style="margin-top:20px; font-weight:bold; height: 30px;"></div>
        <button onclick="closeQuiz()" style="margin-top: 20px; background: #eee; border: none; padding: 10px; border-radius: 5px; cursor: pointer;">Exit Quiz</button>
    </div>
</div>
/* --- CHUNK 12: QUIZ LOGIC --- */

function startKanjiQuiz() {
    const overlay = document.getElementById('quizOverlay');
    overlay.style.display = 'flex';
    nextQuizQuestion();
}

function nextQuizQuestion() {
    const resultDiv = document.getElementById('quizResult');
    resultDiv.innerText = "";
    
    // Pick random Kanji
    const correctKanji = n5MasterList[Math.floor(Math.random() * n5MasterList.length)];
    
    document.getElementById('quizChar').innerText = correctKanji.char;
    
    // Generate 3 wrong answers
    const options = [correctKanji];
    while(options.length < 4) {
        const random = n5MasterList[Math.floor(Math.random() * n5MasterList.length)];
        if (!options.includes(random)) options.push(random);
    }
    
    // Shuffle options
    options.sort(() => Math.random() - 0.5);
    
    const optionsContainer = document.getElementById('quizOptions');
    optionsContainer.innerHTML = '';
    
    options.forEach(opt => {
        const btn = document.createElement('button');
        btn.innerText = opt.meaning;
        btn.style.padding = "15px";
        btn.style.fontSize = "1.2rem";
        btn.style.cursor = "pointer";
        btn.style.border = "1px solid #ddd";
        btn.style.borderRadius = "8px";
        btn.style.background = "white";
        
        btn.onclick = () => {
            if(opt === correctKanji) {
                btn.style.background = "#2ecc71";
                btn.style.color = "white";
                resultDiv.innerText = "Correct! Next...";
                resultDiv.style.color = "#2ecc71";
                setTimeout(nextQuizQuestion, 1000);
            } else {
                btn.style.background = "#ff6b6b";
                btn.style.color = "white";
                resultDiv.innerText = "Try Again!";
                resultDiv.style.color = "#ff6b6b";
            }
        };
        optionsContainer.appendChild(btn);
    });
}

function closeQuiz() {
    document.getElementById('quizOverlay').style.display = 'none';
}
